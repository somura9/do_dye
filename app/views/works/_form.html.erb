<%= form_with model: work, local: true do |f| %>
  <div class='md:w-1/3'>
    <div>
      <!------ 画像の添付 ------>
      <%= f.label :thumbnail, class: "form-label" %><br>
      <%= f.file_field :thumbnail, onchange: "thumbnailImage(this);", class: "mb-3" %>
      <!------ 添付画像のプレビューを表示 ------>
      <div id="thumbnail" >
        <img id="thumbnail_preview" class="mb-3" width="100">
      </div>
      <!------ 現在DBに登録(保存)されている画像を表示 ------>
      <% if work.thumbnail.present? %> <!-- @user.avatarが存在する場合のみ image_tag を使用(if文ないとエラーが出る) -->
        <span><b>[現在登録されている画像]</b></span>
        <%= image_tag work.thumbnail.url, width: 200, class: "mb-2" %>
      <% end %>
    </div>
    <div>
      <%= f.label :title %>
      <%= f.text_field :title, class: 'form-control' %>
    </div>
  </div>
  <div class='md:w-2/3'>
    <div >
      <%= f.label :summary %>
      <%= f.text_field :summary, class: 'form-control' %>
    </div>
  </div>
  <div class='flex items-center justify-between'>
    <%= f.submit 'create', class: 'bg-black hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline' %>
  </div>
<% end %>

<!------ プレビュー表示用の JavaScript ------->
<script>
  function thumbnailImage(obj){
      var fileReader = new FileReader();
      fileReader.onload = (function() {
        document.getElementById('thumbnail_preview').src = fileReader.result;
      });
      fileReader.readAsDataURL(obj.files[0]);
  }
</script>